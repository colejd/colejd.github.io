<!-- Hammer.js for menu gestures -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js" integrity="sha256-eVNjHw5UeU0jUqPPpZHAkU1z4U+QFBBY488WvueTm88=" crossorigin="anonymous"></script>
<script>
    var sidebar = document.getElementById("sidebar");
    var mainContent = document.getElementById("main-content");
    var contentDarkening = document.getElementById("content-darkening");
    var toggleElems = [sidebar, mainContent, contentDarkening];

    var navbarButton = document.getElementById("navbar-hamburger");

    function toggleSidebar() {
        toggleElems.forEach(function(elem) {
            elem.classList.toggle("show-sidebar");
        });
    }

    function setSidebarOpen(active) {
        toggleElems.forEach(function(elem) {
            if (active) elem.classList.add("show-sidebar");
            else elem.classList.remove("show-sidebar");
        });
    }

    // Hook up gestures
    var mcNavbarButton = new Hammer(navbarButton);
    mcNavbarButton.on("swipeleft swiperight", function(ev) {
        setSidebarOpen(ev.type == "swiperight")
    });
    mcNavbarButton.on("tap press", toggleSidebar);

    var mcDarkening = new Hammer(contentDarkening);
    mcDarkening.on("swipeleft swiperight", function(ev) {
        setSidebarOpen(ev.type == "swiperight")
    });
    mcDarkening.on("tap press", toggleSidebar);

</script>
