<!DOCTYPE html><html lang="en-US"><head><meta charSet="utf-8" /><meta httpEquiv="x-ua-compatible" content="ie=edge" /><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /><style data-href="/styles.382681eb70d74ec7e7ed.css" data-identity="gatsby-global-css">/*
! tailwindcss v3.1.8 | MIT License | https://tailwindcss.com
*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5;-moz-tab-size:4;tab-size:4}body{line-height:inherit}hr{border-top-width:1px;color:inherit}abbr:where([title]){text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}table{border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;padding:0}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-search-decoration{-webkit-appearance:none}summary{display:list-item}blockquote,dd,dl,fieldset,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media (min-width:65ch){.container{max-width:65ch}}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}body{--tw-bg-opacity:1;background-color:rgb(250 250 250/var(--tw-bg-opacity))}@media (prefers-color-scheme:dark){body{background-color:#202020!important}}a:hover{text-decoration-line:underline}a{--tw-text-opacity:1!important;color:rgb(249 115 22/var(--tw-text-opacity))!important}@media (prefers-color-scheme:dark){a{--tw-text-opacity:1!important;color:rgb(196 181 253/var(--tw-text-opacity))!important}}p+pre{margin-bottom:1.5rem!important}div.gatsby-highlight+p{margin-top:1.45rem}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;box-sizing:border-box;font:112.5%/1.45em sans-serif;overflow-y:scroll}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:rgba(0,0,0,.8);margin:0}@media (prefers-color-scheme:dark){body{--tw-text-opacity:1!important;color:rgb(255 255 255/var(--tw-text-opacity))!important}}body{word-wrap:break-word;-moz-font-feature-settings:"kern","liga","clig","calt";-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt";font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-kerning:normal;font-weight:400}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{--tw-border-opacity:1;border-bottom:1px dotted rgba(0,0,0,.5);border-color:rgb(255 255 255/var(--tw-border-opacity));cursor:help;text-decoration:none}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:2.25rem;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}mark{background-color:#ff0;color:#000}@media (prefers-color-scheme:dark){mark{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none;margin:0 0 1.45rem;max-width:100%;padding:0}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace;font-size:1em}figure{margin:0 0 1.45rem;padding:0}hr{--tw-border-opacity:1;background:clear;border-top:2px dotted;border-color:rgb(253 186 116/var(--tw-border-opacity));box-sizing:content-box;height:0;margin:0 0 calc(1.45rem - 1px);overflow:visible;padding:0}@media (prefers-color-scheme:dark){hr{--tw-border-opacity:1;border-color:rgb(99 102 241/var(--tw-border-opacity))}}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 0 1.45rem;padding:0}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}*,:after,:before{box-sizing:inherit}h2{font-size:1.62671rem}h2,h3{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h3{font-size:1.38316rem}h4{font-size:1rem}h4,h5{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h5{font-size:.85028rem}h6{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:.78405rem;font-weight:700;line-height:1.1;text-rendering:optimizeLegibility}h6,hgroup{margin:0 0 1.45rem;padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin:0 0 1.45rem 1.45rem;padding:0}dd,dl,p,table{margin:0 0 1.45rem;padding:0}table{border-collapse:collapse;font-size:1rem;line-height:1.45rem;width:100%}blockquote{margin:0 1.45rem 1.45rem;padding:0}address,form,iframe,noscript{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:.725rem;margin-left:1.45rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code{font-size:.875rem;font-weight:600;line-height:1.45rem}h1 code,h2 code,h3 code,h4 code,h5 code,h6 code{font-size:unset}kbd,samp{font-size:.85rem;line-height:1.45rem}abbr{border-bottom:1px dotted rgba(0,0,0,.5)}@media (prefers-color-scheme:dark){abbr{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}}abbr{cursor:help}acronym{border-bottom:1px dotted rgba(0,0,0,.5)}@media (prefers-color-scheme:dark){acronym{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}}acronym{cursor:help}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12)}@media (prefers-color-scheme:dark){td,th{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}}td,th{font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}tt{border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}@media only screen and (max-width:480px){html{font-size:100%}}ul.bullet-list>li:before{content:"・";float:left;margin:0 0 0 -1.25rem;width:1.25rem}.gatsby-image-fillwidth.gatsby-image-wrapper{width:100%}.gatsby-image-fillwidth *{max-width:unset!important}.prose-slate{--tw-prose-body:#334155;--tw-prose-headings:#0f172a;--tw-prose-lead:#475569;--tw-prose-links:#0f172a;--tw-prose-bold:#0f172a;--tw-prose-counters:#64748b;--tw-prose-bullets:#cbd5e1;--tw-prose-hr:#e2e8f0;--tw-prose-quotes:#0f172a;--tw-prose-quote-borders:#e2e8f0;--tw-prose-captions:#64748b;--tw-prose-code:#0f172a;--tw-prose-pre-code:#e2e8f0;--tw-prose-pre-bg:#1e293b;--tw-prose-th-borders:#cbd5e1;--tw-prose-td-borders:#e2e8f0;--tw-prose-invert-body:#cbd5e1;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#94a3b8;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#94a3b8;--tw-prose-invert-bullets:#475569;--tw-prose-invert-hr:#334155;--tw-prose-invert-quotes:#f1f5f9;--tw-prose-invert-quote-borders:#334155;--tw-prose-invert-captions:#94a3b8;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#cbd5e1;--tw-prose-invert-pre-bg:rgba(0,0,0,.5);--tw-prose-invert-th-borders:#475569;--tw-prose-invert-td-borders:#334155}@media (prefers-color-scheme:light){.prose-slate p{color:var(--tw-prose-body)}.prose-slate code{color:var(--tw-prose-code)}.prose-slate h2,.prose-slate h3,.prose-slate h4,.prose-slate h5,.prose-slate h6{color:var(--tw-prose-headings)}.prose-slate strong{color:var(--tw-prose-bold)}}@media (prefers-color-scheme:dark){.prose-slate p{color:var(--tw-prose-invert-body)}.prose-slate code{color:var(--tw-prose-invert-code)}.prose-slate h2,.prose-slate h3,.prose-slate h4,.prose-slate h5,.prose-slate h6{color:var(--tw-prose-invert-headings)}.prose-slate strong{color:var(--tw-prose-invert-bold)}}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.static{position:static}.absolute{position:absolute}.relative{position:relative}.mb-8{margin-bottom:2rem}.mb-1{margin-bottom:.25rem}.mt-0{margin-top:0}.mb-0{margin-bottom:0}.mt-2{margin-top:.5rem}.mr-0{margin-right:0}.mb-20{margin-bottom:5rem}.ml-4{margin-left:1rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.block{display:block}.inline{display:inline}.flex{display:flex}.hidden{display:none}.h-10{height:2.5rem}.w-full{width:100%}.w-auto{width:auto}.flex-shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.select-none{user-select:none}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.justify-center{justify-content:center}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.25rem*var(--tw-space-y-reverse));margin-top:calc(.25rem*(1 - var(--tw-space-y-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-t-lg{border-top-left-radius:.5rem;border-top-right-radius:.5rem}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-1{padding:.25rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.px-1{padding-left:.25rem;padding-right:.25rem}.py-8{padding-bottom:2rem;padding-top:2rem}.pb-4{padding-bottom:1rem}.pt-4{padding-top:1rem}.text-left{text-align:left}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.italic{font-style:italic}.leading-loose{line-height:2}.underline{text-decoration-line:underline}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgba(0,0,0,.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.blur{--tw-blur:blur(8px)}.blur,.grayscale{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.grayscale{--tw-grayscale:grayscale(100%)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.focus\:not-sr-only:focus{clip:auto;height:auto;margin:0;overflow:visible;padding:0;position:static;white-space:normal;width:auto}@media (min-width:1024px){.lg\:mr-32{margin-right:8rem}}@media (min-width:1536px){.\32xl\:flex{display:flex}.\32xl\:flex-row{flex-direction:row}.\32xl\:justify-center{justify-content:center}}@media (min-width:80ch){.columnbreak\:top-2{top:.5rem}.columnbreak\:left-2{left:.5rem}.columnbreak\:mb-4{margin-bottom:1rem}.columnbreak\:hidden{display:none}.columnbreak\:w-28{width:7rem}.columnbreak\:flex-row{flex-direction:row}.columnbreak\:flex-col{flex-direction:column}.columnbreak\:py-8{padding-bottom:2rem;padding-top:2rem}.columnbreak\:py-0{padding-bottom:0;padding-top:0}.columnbreak\:text-5xl{font-size:3rem;line-height:1}}.main-column-interior{max-width:65ch}@media (min-width:calc(65ch + 2.5rem + 2.5rem + 7rem + 10rem)){.main-column-interior{width:65ch}}.main-column{min-width:0}#thursday-button{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity))}@media (prefers-color-scheme:dark){#thursday-button{--tw-bg-opacity:1!important;background-color:rgb(34 197 94/var(--tw-bg-opacity))!important}}#thursday-button{border-radius:.25rem}@media (prefers-color-scheme:dark){#thursday-button{--tw-text-opacity:1!important;color:rgb(0 0 0/var(--tw-text-opacity))!important}}#thursday-button{transition:visibility 0s,opacity .25s ease-in}.emoji-bullet:before{background-color:unset!important;margin-left:-1.5rem;margin-right:.5rem;top:unset!important}.emoji-bullet-pizza:before{content:"🍕"!important}.emoji-bullet-film-reel:before{content:"📽️"!important}.emoji-bullet-sunglasses:before{content:"🕶️"!important}.emoji-bullet-car:before{content:"🚙"!important}.emoji-bullet-signpost:before{content:"🚏"!important}.emoji-bullet-light-bulb:before{content:"💡"!important}.emoji-bullet-robot:before{content:"🤖"!important}.screenshots{height:400px;overflow-x:scroll;overflow-y:hidden;scroll-snap-type:x mandatory;white-space:nowrap}.screenshots>.screenshot{display:inline-block;height:100%;scroll-snap-align:center}.screenshots>:not(:first-child){margin-left:1em}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-shadow:0 1px rgba(0,0,0,.3)}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}.command-line-prompt{border-right:1px solid #999;display:block;float:left;font-size:100%;letter-spacing:-1px;margin-right:1em;pointer-events:none;text-align:right;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.command-line-prompt>span:before{content:" ";display:block;opacity:.7;padding-right:.8em}.command-line-prompt>span[data-user]:before{content:"[" attr(data-user) "@" attr(data-host) "] $"}.command-line-prompt>span[data-user=root]:before{content:"[" attr(data-user) "@" attr(data-host) "] #"}.command-line-prompt>span[data-prompt]:before{content:attr(data-prompt)}.command-line-prompt>span[data-continuation-prompt]:before{content:attr(data-continuation-prompt)}.command-line span.token.output{opacity:.7}p{margin-bottom:1.45rem}p+h2{margin-top:4rem}.hero-image{margin-bottom:2rem}article span.gatsby-resp-image-wrapper{margin-bottom:3rem;margin-top:3rem}@media (prefers-color-scheme:dark){.gatsby-highlight pre[class*=language-]{background-color:transparent}}.gatsby-highlight pre[class*=language-]{float:left;margin:0;min-width:100%;overflow:initial;padding:0}.gatsby-highlight{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em 0}.gatsby-highlight-code-line{background-color:hsla(0,0%,93%,.082);display:block}.gatsby-highlight pre[class*=language-].line-numbers{padding-left:2.8em}.gatsby-highlight>div[class*=language-]{margin-bottom:1.45rem}.gatsby-highlight{margin-left:-1.25rem;margin-right:-1.25rem}.gatsby-highlight pre{border-radius:0}@media (min-width:80ch){.gatsby-highlight{margin-left:0;margin-right:0}.gatsby-highlight pre{border-radius:.5rem}}:root{--mono-1:#383a42;--mono-2:#696c77;--mono-3:#a0a1a7;--hue-1:#0184bc;--hue-2:#4078f2;--hue-3:#a626a4;--hue-4:#50a14f;--hue-5:#e45649;--hue-5-2:#ca1243;--hue-6:#b76b01;--hue-6-2:#cb7701;--syntax-fg:#383a42;--syntax-bg:clear;--syntax-gutter:#9d9d9f;--syntax-guide:rgba(56,58,66,.2);--syntax-accent:#526fff;--syntax-selection-color:#e5e5e6;--syntax-gutter-background-color-selected:#e5e5e6;--syntax-cursor-line:rgba(56,58,66,.05);--prism-previewer-border:hsl(0,0,95%);--prism-previewer-background:#fff}@media (prefers-color-scheme:dark){:root{--mono-1:#abb2bf;--mono-2:#828997;--mono-3:#5c6370;--hue-1:#56b6c2;--hue-2:#61afef;--hue-3:#c678dd;--hue-4:#98c379;--hue-5:#e06c75;--hue-5-2:#be5046;--hue-6:#d19a66;--hue-6-2:#e5c07b;--syntax-fg:#abb2bf;--syntax-bg:clear;--syntax-gutter:#636d83;--syntax-guide:rgba(171,178,191,.15);--syntax-accent:#528bff;--syntax-selection-color:#3e4451;--syntax-gutter-background-color-selected:#3a3f4b;--syntax-cursor-line:rgba(153,187,255,.04);--prism-previewer-border:#262931;--prism-previewer-background:#31363f}}code[class*=language-],pre[class*=language-]{background:var(--syntax-bg);color:var(--syntax-fg);direction:ltr;font-family:Fira Code,Fira Mono,Menlo,Consolas,DejaVu Sans Mono,monospace;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:var(--syntax-selection-color);color:inherit}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection{background:var(--syntax-selection-color);color:inherit}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.2em .3em;white-space:normal}.token.cdata,.token.comment,.token.prolog{color:var(--mono-3)}.token.doctype,.token.entity,.token.punctuation{color:var(--syntax-fg)}.token.atrule,.token.attr-name,.token.boolean,.token.class-name,.token.constant,.token.number{color:var(--hue-6)}.token.keyword{color:var(--hue-3)}.token.deleted,.token.important,.token.property,.token.symbol,.token.tag{color:var(--hue-5)}.token.attr-value,.token.attr-value>.token.punctuation,.token.builtin,.token.char,.token.inserted,.token.regex,.token.selector,.token.string{color:var(--hue-4)}.token.function,.token.operator,.token.variable{color:var(--hue-2)}.token.url{color:var(--hue-1)}.token.attr-value>.token.punctuation.attr-equals,.token.special-attr>.token.attr-value>.token.value.css{color:var(--syntax-fg)}.language-css .token.selector{color:var(--hue-5)}.language-css .token.property{color:var(--syntax-fg)}.language-css .token.function,.language-css .token.url>.token.function{color:var(--hue-1)}.language-css .token.url>.token.string.url{color:var(--hue-4)}.language-css .token.atrule .token.rule,.language-css .token.important,.language-javascript .token.operator{color:var(--hue-3)}.language-javascript .token.template-string>.token.interpolation>.token.interpolation-punctuation.punctuation{color:#ca1243}.language-json .token.operator{color:var(--syntax-fg)}.language-json .token.null.keyword{color:var(--hue-6)}.language-markdown .token.url,.language-markdown .token.url-reference.url>.token.string,.language-markdown .token.url>.token.operator{color:var(--syntax-fg)}.language-markdown .token.url>.token.content{color:var(--hue-2)}.language-markdown .token.url-reference.url,.language-markdown .token.url>.token.url{color:var(--hue-1)}.language-markdown .token.blockquote.punctuation,.language-markdown .token.hr.punctuation{color:var(--mono-3);font-style:italic}.language-markdown .token.code-snippet{color:var(--hue-4)}.language-markdown .token.bold .token.content{color:var(--hue-6)}.language-markdown .token.italic .token.content{color:var(--hue-3)}.language-markdown .token.list.punctuation,.language-markdown .token.strike .token.content,.language-markdown .token.strike .token.punctuation,.language-markdown .token.title.important>.token.punctuation{color:var(--hue-5)}.token.bold{font-weight:700}.token.comment,.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.8}.token.token.cr:before,.token.token.lf:before,.token.token.space:before,.token.token.tab:not(:empty):before{color:var(--syntax-guide)}div.code-toolbar>.toolbar.toolbar>.toolbar-item{margin-right:.4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span{background:var(--syntax-gutter-background-color-selected);border-radius:.3em;color:var(--mono-2);padding:.1em .4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:hover{background:var(--syntax-selection-color);color:var(--syntax-fg)}.line-highlight.line-highlight{background:var(--syntax-cursor-line)}.line-highlight.line-highlight:before,.line-highlight.line-highlight[data-end]:after{background:var(--syntax-gutter-background-color-selected);border-radius:.3em;box-shadow:0 2px 0 0 rgba(0,0,0,.2);color:var(--syntax-fg);padding:.1em .6em}pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:var(--syntax-cursor-line)}.command-line .command-line-prompt,.line-numbers.line-numbers .line-numbers-rows{border-right-color:var(--syntax-guide)}.command-line .command-line-prompt>span:before,.line-numbers .line-numbers-rows>span:before{color:var(--syntax-gutter)}.rainbow-braces .token.token.punctuation.brace-level-1,.rainbow-braces .token.token.punctuation.brace-level-5,.rainbow-braces .token.token.punctuation.brace-level-9{color:var(--hue-5)}.rainbow-braces .token.token.punctuation.brace-level-10,.rainbow-braces .token.token.punctuation.brace-level-2,.rainbow-braces .token.token.punctuation.brace-level-6{color:var(--hue-4)}.rainbow-braces .token.token.punctuation.brace-level-11,.rainbow-braces .token.token.punctuation.brace-level-3,.rainbow-braces .token.token.punctuation.brace-level-7{color:var(--hue-2)}.rainbow-braces .token.token.punctuation.brace-level-12,.rainbow-braces .token.token.punctuation.brace-level-4,.rainbow-braces .token.token.punctuation.brace-level-8{color:var(--hue-3)}pre.diff-highlight>code .token.token.deleted:not(.prefix),pre>code.diff-highlight .token.token.deleted:not(.prefix){background-color:rgba(255,82,102,.15)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix),pre>code.diff-highlight .token.token.inserted:not(.prefix){background-color:rgba(25,255,91,.15)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection{background-color:rgba(56,224,98,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::selection{background-color:rgba(56,224,98,.25)}.prism-previewer-gradient.prism-previewer-gradient div,.prism-previewer.prism-previewer:before{border-color:var(--prism-previewer-border)}.prism-previewer-color.prism-previewer-color:before,.prism-previewer-easing.prism-previewer-easing:before,.prism-previewer-gradient.prism-previewer-gradient div{border-radius:.3em}.prism-previewer.prism-previewer:after{border-top-color:var(--prism-previewer-border)}.prism-previewer-flipped.prism-previewer-flipped.after{border-bottom-color:var(--prism-previewer-border)}.prism-previewer-angle.prism-previewer-angle:before,.prism-previewer-easing.prism-previewer-easing,.prism-previewer-time.prism-previewer-time:before{background:var(--prism-previewer-background)}.prism-previewer-angle.prism-previewer-angle circle,.prism-previewer-time.prism-previewer-time circle{stroke:var(--syntax-fg);stroke-opacity:1}.prism-previewer-easing.prism-previewer-easing circle,.prism-previewer-easing.prism-previewer-easing line,.prism-previewer-easing.prism-previewer-easing path{stroke:var(--syntax-fg)}.prism-previewer-easing.prism-previewer-easing circle{fill:transparent}.project-container{margin:1rem auto;padding-bottom:100%;position:relative;width:100%}.project-container canvas{position:absolute}.project-container.shadowed{box-shadow:0 0 12px 0 rgba(0,0,0,.2)}.project-container.break-aspect-on-mobile{padding-bottom:75vh}@media (min-width:80ch){.project-container.break-aspect-on-mobile{padding-bottom:100%}}</style><meta name="generator" content="Gatsby 3.14.6" /><title data-react-helmet>Randomizing UIColor with Method Swizzling | Jon's Website</title><meta data-react-helmet name="description" content="Breaking UIKit with code injection." /><meta data-react-helmet name="og:title" content="Randomizing UIColor with Method Swizzling" /><meta data-react-helmet name="og:description" content="Breaking UIKit with code injection." /><meta data-react-helmet name="og:type" content="article" /><meta data-react-helmet name="og:site_name" content="Jon's Website" /><meta data-react-helmet name="twitter:card" content="summary_large_image" /><meta data-react-helmet name="twitter:creator" content /><meta data-react-helmet name="twitter:title" content="Randomizing UIColor with Method Swizzling" /><meta data-react-helmet name="twitter:description" content="Breaking UIKit with code injection." /><meta data-react-helmet name="twitter:image" content="https://jons.website/static/ed27f254c254d4121d84824de84f12a9/preview-small.png" /><meta data-react-helmet name="twitter:image:alt" content="A screenshot of Slide for Reddit with all colors randomized" /><meta data-react-helmet name="og:image" content="https://jons.website/static/ed27f254c254d4121d84824de84f12a9/preview-small.png" /><meta data-react-helmet name="og:article:published_time" content="2018-08-10T00:00:00.000Z" /><meta data-react-helmet name="og:article:modified_time" /><script data-react-helmet type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://jons.website/blog/randomizing-uicolor-with-swizzling/"},"inLanguage":"en-US","author":{"@type":"Person","name":"Jonathan Cole","givenName":"Jonathan","familyName":"Cole","sameAs":["https://github.com/colejd"]},"publisher":{"@type":"Person","name":"Jonathan Cole","givenName":"Jonathan","familyName":"Cole","sameAs":["https://github.com/colejd"],"logo":{"@type":"ImageObject","url":"https://jons.website/assets/images/avatar.png"}},"datePublished":"2018-08-10T00:00:00.000Z","dateModified":null,"isAccessibleForFree":true,"keywords":"ios uicolor random swizzling swift objective-c hack software programming development","headline":"Randomizing UIColor with Method Swizzling","description":"Breaking UIKit with code injection.","image":{"@type":"ImageObject","url":"https://jons.website/static/ed27f254c254d4121d84824de84f12a9/preview-small.png"}}</script><link rel="canonical" href="https://jons.website/blog/randomizing-uicolor-with-swizzling/" data-baseprotocol="https:" data-basehost="jons.website" /><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=ff44750de9a165d6ee91c26a80293194" type="image/png" /><link rel="manifest" href="/manifest.webmanifest" crossOrigin="anonymous" /><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=ff44750de9a165d6ee91c26a80293194" /><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=ff44750de9a165d6ee91c26a80293194" /><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=ff44750de9a165d6ee91c26a80293194" /><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=ff44750de9a165d6ee91c26a80293194" /><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=ff44750de9a165d6ee91c26a80293194" /><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=ff44750de9a165d6ee91c26a80293194" /><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=ff44750de9a165d6ee91c26a80293194" /><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=ff44750de9a165d6ee91c26a80293194" /><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap.xml" /><link rel="alternate" type="application/rss+xml" title="Jon's Blog" href="/rss.xml" /><link as="script" rel="preload" href="/webpack-runtime-a1410d557796a525b231.js" /><link as="script" rel="preload" href="/framework-25add98bf20cee191708.js" /><link as="script" rel="preload" href="/app-9ccce7c97793f07a9b8f.js" /><link as="script" rel="preload" href="/commons-7a18c21993c24c3c9205.js" /><link as="script" rel="preload" href="/component---src-templates-blog-post-js-313d8220c9e9c9688b4d.js" /><link as="fetch" rel="preload" href="/page-data/blog/randomizing-uicolor-with-swizzling/page-data.json" crossOrigin="anonymous" /><link as="fetch" rel="preload" href="/page-data/sq/d/2780354278.json" crossOrigin="anonymous" /><link as="fetch" rel="preload" href="/page-data/sq/d/3903778693.json" crossOrigin="anonymous" /><link as="fetch" rel="preload" href="/page-data/app-data.json" crossOrigin="anonymous" /></head><body><div id="___gatsby"><div style="outline: none;" tabIndex="-1" id="gatsby-focus-wrapper"><div class="prose-slate w-full 2xl:flex 2xl:flex-row 2xl:justify-center"><div id="outer-column" class="flex flex-col columnbreak:flex-row"><a style="position: absolute !important;" href="#main-content" class="sr-only focus:not-sr-only columnbreak:top-2 columnbreak:left-2">Skip to main content</a><nav id="sidebar" aria-label="Main Navigation" class="px-5 columnbreak:py-8 flex-shrink-0 columnbreak:w-28"><div class="flex flex-row columnbreak:flex-col text-left py-2 columnbreak:py-0 flex-wrap"><a href="/">About Me</a><span aria-hidden="true" class="columnbreak:hidden px-1 select-none">•</span><a href="/blog/">Blog</a><span aria-hidden="true" class="columnbreak:hidden px-1 select-none">•</span><a href="/projects/">Projects</a><span aria-hidden="true" class="columnbreak:hidden px-1 select-none">•</span><a href="/apps/">Apps</a></div></nav><div aria-label="Main Content" class="main-column flex-grow mr-0 lg:mr-32 px-5 py-8 mb-20"><div class="main-column-interior flex flex-col"><main id="main-content"><article class="prose-slate"><header><h1 class="text-3xl columnbreak:text-5xl mb-2 columnbreak:mb-4">Randomizing UIColor with Method Swizzling</h1><p class="mb-0"><em>Why not?</em></p><p class="text-sm leading-loose mb-4"><time dateTime="2018-08-10">August 10th, 2018</time></p><div data-gatsby-image-wrapper class="gatsby-image-wrapper gatsby-image-wrapper-constrained hero-image mb-4"><div style="max-width: 1125px; display: block;"><img alt role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height='563' width='1125' xmlns='http://www.w3.org/2000/svg' version='1.1'%3E%3C/svg%3E" style="max-width: 100%; display: block; position: static;" /></div><img aria-hidden="true" data-placeholder-image style="opacity: 1; transition: opacity 500ms linear;" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACsElEQVQoz1XGe0zMAQDA8R//xD8286hpVpv5yyZdV3QOc9puWJYpl0r0uFII1R3pltJDm0oXkvSSy0XKa3PVEllbd+pK5TItflLn1Ys8Nq99rZjxx2ffr6AYlLJn70Y21a9l5Td35O89WD0pQT7pgWzcA89Rd9aMSlk/shrvETneU30n//NyZNMvQznhg8+kEiHAcIWdldUkmiqJqK1CdbGKYMNVtlZUEd5zhZzBRlS2Inwu1qMu7CT6vJXo4odEF1mJKuokuthMZFE/rrEFLNwajJCYV8rBwhJijCUczjagSTeQlFGNOvUCxrZmsNox9NUhOX4PReIYCu0bFEeG2KB9heKwnQ1JIuuOfELi5s8WJwFhXt92HF6omDkciIMYyCxxB7PFIGY890c6pEH1OJtt/cm4pNoQDoCQ8BUhjt8/ZeoPwZxd7SwNqUUIuhWJzKrGu1fNqt4oVj1WT/O2ReL+KIpltv0o22LYfaqWdfntbNabkGf2IzshIst6jixTRJbxjBXZdlbkjiNo/Wwk+9rQ+XWj29ZFsm8vR3270SlFkkNvE+ofT7q2mDrLSUo6UijtyKC88xgV1hTKu1Motem49CSN1h491xs0CMGudkJcX7HL5TXhLiOEOY8R7jxK6Nwv5MU9ZK92EwcjUzH3VNIo5tE0UEBDv576p3oaRT1N9jzaRs9RVrcfZYAE4cy+b+TGfSQn9if6PZAfA/oYyI+Cs7oPZCVZSEu4y7OBa/Cjhc/fG4Bm4D5w748H9Inl3GjJQmgIKqA0PIvKwNPUqCq4qir7q8a/gjq/Gm6EFWLOjqA9PYHGsxEMXI5n2KjlpVHDkFEz3be1OiZupiFYvJwwr1xCl+cCOrzmY/1Hs9dCTF4LMEkdMXks5o7UmWbJYixuTpjdHP/T6raI1uWO/AIONwkCDHgm1wAAAABJRU5ErkJggg==" alt /><picture><source type="image/avif" data-srcset="/static/ed27f254c254d4121d84824de84f12a9/7d3d0/preview-small.avif 281w,/static/ed27f254c254d4121d84824de84f12a9/91e00/preview-small.avif 563w,/static/ed27f254c254d4121d84824de84f12a9/23f82/preview-small.avif 1125w" sizes="(min-width: 1125px) 1125px, 100vw" /><source type="image/webp" data-srcset="/static/ed27f254c254d4121d84824de84f12a9/df2be/preview-small.webp 281w,/static/ed27f254c254d4121d84824de84f12a9/b4525/preview-small.webp 563w,/static/ed27f254c254d4121d84824de84f12a9/b37fe/preview-small.webp 1125w" sizes="(min-width: 1125px) 1125px, 100vw" /><img data-gatsby-image-ssr data-main-image style="opacity: 0;" sizes="(min-width: 1125px) 1125px, 100vw" decoding="async" loading="lazy" data-src="/static/ed27f254c254d4121d84824de84f12a9/633af/preview-small.png" data-srcset="/static/ed27f254c254d4121d84824de84f12a9/189e1/preview-small.png 281w,/static/ed27f254c254d4121d84824de84f12a9/f12ce/preview-small.png 563w,/static/ed27f254c254d4121d84824de84f12a9/633af/preview-small.png 1125w" alt="A screenshot of Slide for Reddit with all colors randomized" /></picture><noscript><picture><source type="image/avif" srcSet="/static/ed27f254c254d4121d84824de84f12a9/7d3d0/preview-small.avif 281w,/static/ed27f254c254d4121d84824de84f12a9/91e00/preview-small.avif 563w,/static/ed27f254c254d4121d84824de84f12a9/23f82/preview-small.avif 1125w" sizes="(min-width: 1125px) 1125px, 100vw" /><source type="image/webp" srcSet="/static/ed27f254c254d4121d84824de84f12a9/df2be/preview-small.webp 281w,/static/ed27f254c254d4121d84824de84f12a9/b4525/preview-small.webp 563w,/static/ed27f254c254d4121d84824de84f12a9/b37fe/preview-small.webp 1125w" sizes="(min-width: 1125px) 1125px, 100vw" /><img data-gatsby-image-ssr data-main-image style="opacity: 0;" sizes="(min-width: 1125px) 1125px, 100vw" decoding="async" loading="lazy" src="/static/ed27f254c254d4121d84824de84f12a9/633af/preview-small.png" srcSet="/static/ed27f254c254d4121d84824de84f12a9/189e1/preview-small.png 281w,/static/ed27f254c254d4121d84824de84f12a9/f12ce/preview-small.png 563w,/static/ed27f254c254d4121d84824de84f12a9/633af/preview-small.png 1125w" alt="A screenshot of Slide for Reddit with all colors randomized" /></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div></header><section class="markdown"><p>Lately, I’ve helped contribute to <a href="https://github.com/ccrama/Slide-iOS">Slide for Reddit</a>, an open-source Reddit client for iOS written in Swift. We’re reconsidering some aspects of our UI customization options, and I’m of the opinion that the user just doesn’t have the tools they need to make the app as ugly as humanly possible. As a joke, I wanted to randomize all the colors throughout the app just to see what it would look like. That led to an interesting question: is it possible to write an extension for <code>UIColor</code> that forces all instances to be randomized when they are used?</p>
<p>This was a surprisingly deep rabbit hole to jump into.</p>
<h2 id="first-steps" style="position:relative;"><a href="#first-steps" aria-label="first steps permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>First Steps</h2>
<p>It is not possible to override a property or method inside of a Swift extension. This precludes doing something fishy like overriding <code>UIColor</code>’s initializer. In any case, we want the color to change every time it is accessed, so we would need to override a property of <code>UIColor</code>.</p>
<p>Interestingly, <code>UIColor</code>s are not used directly for drawing; instead, they serve a <code>CGColor</code> instance via their <code>cgColor</code> property when accessed. If we could override <code>cgColor</code> in our extension, we could return a random color from there, but this is not allowed. Or at least, it isn’t allowed in pure Swift.</p>
<p>The Objective-C runtime allows us to perform <em>method swizzling</em>, which is a technique that replaces the implementation of a selector with another implementation at run time. After a brief read on this topic, I had the following code:</p>
<div class="gatsby-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">extension</span> <span class="token class-name">UIColor</span> <span class="token punctuation">{</span>

  <span class="token keyword">class</span> <span class="token keyword">func</span> <span class="token function-definition function">jc_swizzle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> originalSelector <span class="token operator">=</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span>getter<span class="token punctuation">:</span> cgColor<span class="token punctuation">)</span>
    <span class="token keyword">let</span> swizzledSelector <span class="token operator">=</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span>randomCGColor<span class="token punctuation">)</span>
    <span class="token keyword">let</span> originalMethod <span class="token operator">=</span> <span class="token function">class_getInstanceMethod</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> originalSelector<span class="token punctuation">)</span><span class="token operator">!</span>
    <span class="token keyword">let</span> swizzledMethod <span class="token operator">=</span> <span class="token function">class_getInstanceMethod</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> swizzledSelector<span class="token punctuation">)</span><span class="token operator">!</span>
    <span class="token function">method_exchangeImplementations</span><span class="token punctuation">(</span>originalMethod<span class="token punctuation">,</span> swizzledMethod<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token attribute atrule">@objc</span> <span class="token keyword">func</span> <span class="token function-definition function">randomCGColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">CGColor</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">CGColor</span><span class="token punctuation">(</span>
      colorSpace<span class="token punctuation">:</span> <span class="token class-name">CGColorSpaceCreateDeviceRGB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      components<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// R</span>
        <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// G</span>
        <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
        <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">!</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre></div>
<p>In <code>jc_swizzle()</code>, we swap the getter for <code>UIColor.cgColor</code> with the extension function <code>randomCGColor()</code>. This in theory does what we want! Let’s see what it looks like:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; max-width: clamp(200px, calc(0.46210720887245843* 80vh), 462.1px); max-height: 1000px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/174a74a387ad857489e9bf17df33882f/78797/stage1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 216.39999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Slide looking perfectly normal."
        title="Slide looking perfectly normal."
        src="/static/174a74a387ad857489e9bf17df33882f/00d43/stage1.png"
        srcset="/static/174a74a387ad857489e9bf17df33882f/63868/stage1.png 250w,
/static/174a74a387ad857489e9bf17df33882f/0b533/stage1.png 500w,
/static/174a74a387ad857489e9bf17df33882f/00d43/stage1.png 1000w,
/static/174a74a387ad857489e9bf17df33882f/78797/stage1.png 1125w"
        sizes="(max-width: 1000px) 100vw, 1000px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>What?! That looks good! That can’t be right. What happened?</p>
<h2 id="class-clusters" style="position:relative;"><a href="#class-clusters" aria-label="class clusters permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Class Clusters</h2>
<p>As it turns out, Apple makes use of an Objective-C pattern called a <em><a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html">class cluster</a></em> in <code>UIColor</code>. Under the hood, there are many private subclasses of <code>UIColor</code>, but they’re all hidden from any public interface. That means we just overrode the method of a class that doesn’t actually ever get used.</p>
<p>So then, let’s find out what class some random <code>UIColor</code> instance resolves to. For <code>UIColor.red</code>, that ends up being <code>UICachedDeviceRGBColor</code>. Let’s work on that:</p>
<div class="gatsby-highlight has-highlighted-lines" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">public</span> <span class="token keyword">extension</span> <span class="token class-name">UIColor</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">jc_swizzle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// This resolves to `UICachedDeviceRGBColor`</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">let</span> _class<span class="token punctuation">:</span> <span class="token class-name">AnyClass</span><span class="token operator">!</span> <span class="token operator">=</span> <span class="token function">object_getClass</span><span class="token punctuation">(</span><span class="token class-name">UIColor</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span></span>
    <span class="token keyword">let</span> originalMethod <span class="token operator">=</span> <span class="token function">class_getInstanceMethod</span><span class="token punctuation">(</span>_class<span class="token punctuation">,</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span>getter<span class="token punctuation">:</span> cgColor<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> swizzledMethod <span class="token operator">=</span> <span class="token function">class_getInstanceMethod</span><span class="token punctuation">(</span>_class<span class="token punctuation">,</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span>randomCGColor<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token keyword">let</span> originalMethod <span class="token operator">=</span> originalMethod<span class="token punctuation">,</span> <span class="token keyword">let</span> swizzledMethod <span class="token operator">=</span> swizzledMethod <span class="token punctuation">{</span>
      <span class="token function">method_exchangeImplementations</span><span class="token punctuation">(</span>originalMethod<span class="token punctuation">,</span> swizzledMethod<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">dynamic</span> <span class="token keyword">func</span> <span class="token function-definition function">randomCGColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">CGColor</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">CGColor</span><span class="token punctuation">(</span>colorSpace<span class="token punctuation">:</span> <span class="token class-name">CGColorSpaceCreateDeviceRGB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> components<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// R</span>
      <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// G</span>
      <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
      <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">!</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre></div>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; max-width: clamp(200px, calc(0.46210720887245843* 80vh), 462.1px); max-height: 1000px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/51023eb02737342fe2529f68c4d3fd6f/78797/stage2.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 216.39999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Slide with mostly randomized colors."
        title="Slide with mostly randomized colors."
        src="/static/51023eb02737342fe2529f68c4d3fd6f/00d43/stage2.png"
        srcset="/static/51023eb02737342fe2529f68c4d3fd6f/63868/stage2.png 250w,
/static/51023eb02737342fe2529f68c4d3fd6f/0b533/stage2.png 500w,
/static/51023eb02737342fe2529f68c4d3fd6f/00d43/stage2.png 1000w,
/static/51023eb02737342fe2529f68c4d3fd6f/78797/stage2.png 1125w"
        sizes="(max-width: 1000px) 100vw, 1000px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>This works. On the highlighted line, we get the class object for <code>UIColor.red</code> (<code>UICachedDeviceRGBColor</code>), which we then pass as the first argument to <code>class_getInstanceMethod</code> instead of <code>UIColor.self</code>. By swizzling <code>UICachedDeviceRGBColor</code> we can affect many, many more colors.</p>
<p>But who knows how many other <code>UIColor</code> subclasses there are? I couldn’t stop here. I wanted to ruin <em>all</em> the colors. The code that results from this path of inquiry is horrible and evil and will absolutely get you rejected from the App Store. Apple doesn’t like developers referencing private headers, after all. Let’s do it anyway.</p>
<p>How can we reference the private internal objc classes that back <code>UIColor</code>? Well, we can use <code>NSClassFromString()</code> to get them if we know their names. We know about <code>UICachedDeviceWhiteColor</code> and <code>UICachedDeviceRGBColor</code> but who knows how many others there are under the hood?</p>
<p>Well, I knows. The answer is ten:</p>
<ul class="bullet-list">
<li><code>UIDeviceRGBColor</code></li>
<li><code>UICachedDeviceRGBColor</code> (derives from <code>UIDeviceRGBColor</code>)</li>
<li><code>NSColor</code></li>
<li><code>UIDisplayP3Color</code></li>
<li><code>UIPlaceholderColor</code></li>
<li><code>UICIColor</code></li>
<li><code>UIDeviceWhiteColor</code></li>
<li><code>UICachedDeviceWhiteColor</code> (derives from <code>UIDeviceWhiteColor</code>)</li>
<li><code>UICGColor</code></li>
<li><code>UICachedDevicePatternColor</code> (derives from <code>UICGColor</code>)</li>
</ul>
<p>I found these by grepping through <a href="https://github.com/nst/iOS-Runtime-Headers">a dump of the private headers in iOS 11.4</a>. If you’d like to do this yourself, run <code>grep -r -n ".\+:\s*UIColor".</code> in the terminal (you’ll also want to run this again for each subclass you discover, replacing <code>UIColor</code> with the new class name just in case there are any subclasses of those). Let’s use these:</p>
<div class="gatsby-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">public</span> <span class="token keyword">extension</span> <span class="token class-name">UIColor</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">struct</span> <span class="token class-name">StaticVars</span> <span class="token punctuation">{</span>
    <span class="token comment">// Names of classes to swizzle. Derived from dumped private headers.</span>
    <span class="token keyword">static</span> <span class="token keyword">let</span> classesToSwizzle<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token string-literal"><span class="token string">"UIColor"</span></span><span class="token punctuation">,</span>
      <span class="token string-literal"><span class="token string">"UIDeviceRGBColor"</span></span><span class="token punctuation">,</span>
      <span class="token string-literal"><span class="token string">"NSColor"</span></span><span class="token punctuation">,</span>
      <span class="token string-literal"><span class="token string">"UIDisplayP3Color"</span></span><span class="token punctuation">,</span>
      <span class="token string-literal"><span class="token string">"UIPlaceholderColor"</span></span><span class="token punctuation">,</span>
      <span class="token string-literal"><span class="token string">"UICIColor"</span></span><span class="token punctuation">,</span>
      <span class="token string-literal"><span class="token string">"UIDeviceWhiteColor"</span></span><span class="token punctuation">,</span>
      <span class="token string-literal"><span class="token string">"UICGColor"</span></span><span class="token punctuation">,</span>
      <span class="token string-literal"><span class="token string">"UICachedDeviceRGBColor"</span></span><span class="token punctuation">,</span>
      <span class="token string-literal"><span class="token string">"UICachedDeviceWhiteColor"</span></span><span class="token punctuation">,</span>
      <span class="token string-literal"><span class="token string">"UICachedDevicePatternColor"</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>

    <span class="token keyword">static</span> <span class="token keyword">let</span> randomColorBlock<span class="token punctuation">:</span> <span class="token attribute atrule">@convention</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token class-name">AnyObject</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">CGColor</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token operator">-></span> <span class="token punctuation">(</span><span class="token class-name">CGColor</span><span class="token punctuation">)</span> <span class="token keyword">in</span>
      <span class="token keyword">return</span> <span class="token class-name">CGColor</span><span class="token punctuation">(</span>colorSpace<span class="token punctuation">:</span> <span class="token class-name">CGColorSpaceCreateDeviceRGB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> components<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// R</span>
        <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// G</span>
        <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
        <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">!</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">jc_swizzle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> className <span class="token keyword">in</span> <span class="token class-name">StaticVars</span><span class="token punctuation">.</span>classesToSwizzle <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token keyword">let</span> classFromString <span class="token operator">=</span> <span class="token class-name">NSClassFromString</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">let</span> originalMethod <span class="token operator">=</span> <span class="token function">class_getInstanceMethod</span><span class="token punctuation">(</span>classFromString<span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span>getter<span class="token punctuation">:</span> cgColor<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">method_setImplementation</span><span class="token punctuation">(</span>originalMethod<span class="token punctuation">,</span> <span class="token function">imp_implementationWithBlock</span><span class="token punctuation">(</span>
          <span class="token function">unsafeBitCast</span><span class="token punctuation">(</span><span class="token class-name">StaticVars</span><span class="token punctuation">.</span>randomColorBlock<span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token class-name">AnyObject</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre></div>
<p>This is much, <em>much</em> more effective:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; max-width: clamp(200px, calc(0.46210720887245843* 80vh), 462.1px); max-height: 1000px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3f17c602efdb35d67aae4df67375c418/78797/stage3.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 216.39999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Slide with fully randomized colors."
        title="Slide with fully randomized colors."
        src="/static/3f17c602efdb35d67aae4df67375c418/00d43/stage3.png"
        srcset="/static/3f17c602efdb35d67aae4df67375c418/63868/stage3.png 250w,
/static/3f17c602efdb35d67aae4df67375c418/0b533/stage3.png 500w,
/static/3f17c602efdb35d67aae4df67375c418/00d43/stage3.png 1000w,
/static/3f17c602efdb35d67aae4df67375c418/78797/stage3.png 1125w"
        sizes="(max-width: 1000px) 100vw, 1000px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Note how everything is affected, including the individual drawable elements in the status bar:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; max-width: clamp(200px, calc(8.333333333333334* 80vh), 1000px); max-height: 1000px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/43b8a4475ff241c4ef82421932919f9f/78797/stage3-toolbar.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAV0lEQVQI15XMMQ6AIBAFUW4BrLqAibEwodAYXBbvf6yvnMBYTDHNM84WzCQ4Y8M6VvQnd31nC7yvSFPDwYLMiuAKTAcSCfagWAb5BZJXRL6RuWJjBb/gA/T0OXal79/JAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="A close-up of the system toolbar with mostly randomized colors."
        title="A close-up of the system toolbar with mostly randomized colors."
        src="/static/43b8a4475ff241c4ef82421932919f9f/00d43/stage3-toolbar.png"
        srcset="/static/43b8a4475ff241c4ef82421932919f9f/63868/stage3-toolbar.png 250w,
/static/43b8a4475ff241c4ef82421932919f9f/0b533/stage3-toolbar.png 500w,
/static/43b8a4475ff241c4ef82421932919f9f/00d43/stage3-toolbar.png 1000w,
/static/43b8a4475ff241c4ef82421932919f9f/78797/stage3-toolbar.png 1125w"
        sizes="(max-width: 1000px) 100vw, 1000px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>This is a fine solution, but it doesn’t satisfy the engineer in me. What happens when iOS updates? What if there are classes that I missed?</p>
<h2 id="things-get-worse" style="position:relative;"><a href="#things-get-worse" aria-label="things get worse permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Things Get Worse</h2>
<p>Shortly after writing this code, I was made aware of <code>objc_getClassList()</code>. This creates a list of class objects for <em>every single</em> class loaded at runtime. In fact, on my phone running iOS 11.3.1, that list contains 25,265 elements. Let’s parse these instead of keeping a list of strings:</p>
<div class="gatsby-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">public</span> <span class="token keyword">extension</span> <span class="token class-name">UIColor</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">struct</span> <span class="token class-name">StaticVars</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">let</span> randomColorBlock<span class="token punctuation">:</span> <span class="token attribute atrule">@convention</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token class-name">AnyObject</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">CGColor</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token operator">-></span> <span class="token punctuation">(</span><span class="token class-name">CGColor</span><span class="token punctuation">)</span> <span class="token keyword">in</span>
      <span class="token keyword">return</span> <span class="token class-name">CGColor</span><span class="token punctuation">(</span>colorSpace<span class="token punctuation">:</span> <span class="token class-name">CGColorSpaceCreateDeviceRGB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> components<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// R</span>
        <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// G</span>
        <span class="token class-name">CGFloat</span><span class="token punctuation">(</span><span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Float</span><span class="token punctuation">(</span>UINT32_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
        <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">!</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">jc_swizzle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Returns true if the given class has `superclass` anywhere in its class hierarchy</span>
    <span class="token keyword">func</span> <span class="token function-definition function">isClassSubclassOf</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> base<span class="token punctuation">:</span> <span class="token class-name">AnyClass</span><span class="token operator">?</span><span class="token punctuation">,</span> superclass<span class="token punctuation">:</span> <span class="token class-name">AnyClass</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> _class<span class="token punctuation">:</span> <span class="token class-name">AnyClass</span><span class="token operator">?</span> <span class="token operator">=</span> base
        <span class="token keyword">while</span> _class <span class="token operator">!=</span> <span class="token nil constant">nil</span> <span class="token operator">&amp;&amp;</span> _class <span class="token operator">!=</span> superclass <span class="token punctuation">{</span>
            _class <span class="token operator">=</span> <span class="token function">class_getSuperclass</span><span class="token punctuation">(</span>_class<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> _class <span class="token operator">==</span> superclass
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> classCount <span class="token operator">=</span> <span class="token function">objc_getClassList</span><span class="token punctuation">(</span><span class="token nil constant">nil</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> allClasses <span class="token operator">=</span> <span class="token class-name">UnsafeMutablePointer</span><span class="token operator">&lt;</span><span class="token class-name">AnyClass</span><span class="token operator">?></span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span>capacity<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">(</span>classCount<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> autoreleasingAllClasses <span class="token operator">=</span> <span class="token class-name">AutoreleasingUnsafeMutablePointer</span><span class="token operator">&lt;</span><span class="token class-name">AnyClass</span><span class="token operator">?></span><span class="token punctuation">(</span>allClasses<span class="token punctuation">)</span>
    classCount <span class="token operator">=</span> <span class="token function">objc_getClassList</span><span class="token punctuation">(</span>autoreleasingAllClasses<span class="token punctuation">,</span> classCount<span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span> <span class="token operator">..&lt;</span> classCount <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token keyword">let</span> currentClass<span class="token punctuation">:</span> <span class="token class-name">AnyClass</span> <span class="token operator">=</span> allClasses<span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function">isClassSubclassOf</span><span class="token punctuation">(</span>currentClass<span class="token punctuation">,</span> superclass<span class="token punctuation">:</span> <span class="token class-name">UIColor</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">let</span> originalMethod <span class="token operator">=</span> <span class="token function">class_getInstanceMethod</span><span class="token punctuation">(</span>currentClass<span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span>getter<span class="token punctuation">:</span> cgColor<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">method_setImplementation</span><span class="token punctuation">(</span>originalMethod<span class="token punctuation">,</span> <span class="token function">imp_implementationWithBlock</span><span class="token punctuation">(</span>
          <span class="token function">unsafeBitCast</span><span class="token punctuation">(</span><span class="token class-name">StaticVars</span><span class="token punctuation">.</span>randomColorBlock<span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token class-name">AnyObject</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre></div>
<p>Here we use <code>objc_getClassList</code> to look through <em>every single class</em> registered at runtime, swizzling the ones that derive from <code>UIColor</code>. This has two benefits. Firstly, because we’re not directly referencing any private derivatives of <code>UIColor</code>, we’re probably <em>(probably)</em> not going to get rejected from the App Store for using this code. Secondly it is better from the standpoint that it will be resistant to changes in iOS in the future. This is guaranteed to replace all <code>UIColor</code> instance getters with the new random color logic, satisfying my original goal.</p>
<p>With that, we have an answer to <em>“Can I?”</em> Perhaps the next article should go into <em>“Should I?”</em></p></section></article></main></div></div></div></div></div><div id="gatsby-announcer" style="position: absolute; top: 0px; width: 1px; height: 1px; padding: 0px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0px;" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/randomizing-uicolor-with-swizzling/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-ea100fe6f02bbc648246.js"],"app":["/app-9ccce7c97793f07a9b8f.js"],"component---src-pages-404-js":["/component---src-pages-404-js-c3131affcb18a6be673b.js"],"component---src-pages-apps-index-js":["/component---src-pages-apps-index-js-074336a16d228c42481f.js"],"component---src-pages-blog-index-js":["/component---src-pages-blog-index-js-88f8d0a956e17435f1a8.js"],"component---src-pages-index-js":["/component---src-pages-index-js-55d2e30e1a121d0a029e.js"],"component---src-pages-projects-index-js":["/component---src-pages-projects-index-js-1cfa78940546ec28181c.js"],"component---src-templates-app-page-js":["/component---src-templates-app-page-js-ca050cdc6ae795d53a8f.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-313d8220c9e9c9688b4d.js"],"component---src-templates-project-page-js":["/component---src-templates-project-page-js-80ece2069d138aa6c838.js"]};/*]]>*/</script><script src="/polyfill-ea100fe6f02bbc648246.js" noModule></script><script src="/component---src-templates-blog-post-js-313d8220c9e9c9688b4d.js" async></script><script src="/commons-7a18c21993c24c3c9205.js" async></script><script src="/app-9ccce7c97793f07a9b8f.js" async></script><script src="/framework-25add98bf20cee191708.js" async></script><script src="/webpack-runtime-a1410d557796a525b231.js" async></script></body></html>